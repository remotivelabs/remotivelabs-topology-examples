schema: remotive-topology-instance:0.12

name: lighting-and-steering

includes:
  - ./tester.instance.yaml
  - ./jupyter.instance.yaml

platform:
  includes:
    - ./topology.platform.yaml

channels:
  RearLightLIN:
    type: lin
    config:
      type: remotivelabs_lin
      device_identifier: 6
      server_port: 2014 # port forward from host
      target_host: 192.168.20.100
      target_port: 2013
      auto_config_boot_server: 4001 # port forward

ecus:
  SCCM:
    mock:
      channels:
        DriverCan0:

  BCM:
    models:
      bcm:
        type: container
        container:
          build:
            dockerfile: ../Dockerfile
          volumes:
            - ../ecus/bcm:/app/bcm
          working_dir: /app
          command: python -m bcm

  DIM:
    channels:
      BodyCan0:

  FLCM:
    channels:
      BodyCan0:

  RLCM:
    channels:
      BodyCan0:
      RearLightLIN:
        config:
          type: lin
          schedule_autostart: true
          schedule_table_name: DEVMLIN01Schedule01

    models:
      rlcm:
        type: container
        container:
          build:
            dockerfile: ../Dockerfile
          volumes:
            - ../ecus/rlcm:/app/rlcm
          working_dir: /app
          command: python -m rlcm

  RL:
    channels:
      RearLightLIN:

  PAM:
    mock:
      channels:
        BodyCan0:

  GWM:
    models:
      gwm:
        type: container
        container:
          build:
            dockerfile: ../Dockerfile
          volumes:
            - ../ecus/gwm:/app/gwm
          working_dir: /app
          command: python -m gwm

  IHU:
    models:
      ihu:
        type: container
        container:
          build:
            dockerfile: ../Dockerfile
          volumes:
            - ../ecus/ihu:/app/ihu
          working_dir: /app
          command: python -m ihu
